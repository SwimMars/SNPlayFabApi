<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Secret Neighbor Exploits</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 40px;
    }
    input, button {
      margin: 5px;
      padding: 8px;
      font-size: 16px;
    }
    h2 {
      margin-top: 30px;
    }
    .section {
      margin-bottom: 40px;
    }
  </style>
</head>
<body>
  <h1>üéÆ Secret Neighbor Exploits</h1>

  <div class="section">
    <h2>üîê SessionTicket</h2>
    <input type="text" id="sessionTicketInput" placeholder="Paste your SessionTicket here" style="width: 400px;">
    <button onclick="setSessionTicket()">Set Tokent</button>
  </div>

  <div class="section">
    <h2>üõçÔ∏è Buy Skin/Emote</h2>
    <input type="text" id="itemId" placeholder="ItemId">
    <input type="number" id="price" placeholder="Price">
    <input type="text" id="currency" placeholder="VirtualCurrency">
    <button onclick="buySkinEmote()">Buy Skin/Emote</button>
  </div>

  <div class="section">
    <h2>üéÅ Grant Coupons</h2>
    <button onclick="grantCoupons()">Grant Coupons</button>
  </div>

  <div class="section">
    <h2>üìÑ How to Get Your SessionTicket with Requestly</h2>
    <ol>
      <li>Download the Requestly desktop app from <a href="https://docs.requestly.com/general/sessions/record-api-sessions" target="_blank">here</a>.</li>
      <li>Open Requestly and start recording network traffic.</li>
      <li>Log into your game or app using PlayFab.</li>
      <li>Find the request to <code>/Client/LoginWithSteam</code> or similar.</li>
      <li>Copy the <code>SessionTicket/X-Authorization</code> from the response body.</li>
      <li>Paste it into the field above and click "Set Token".</li>
    </ol>
  </div>

  <script>
    const titleId = "bdff1"; // Replace with your actual PlayFab title ID
    let sessionTicket = null;

    function setSessionTicket() {
      sessionTicket = document.getElementById("sessionTicketInput").value.trim();
      console.log("SessionTicket set:", sessionTicket);
      alert("SessionTicket set successfully!");
    }

    async function buySkinEmote() {
      if (!sessionTicket) return alert("Please set your SessionTicket first.");

      const ItemId = document.getElementById("itemId").value.trim();
      const Price = parseInt(document.getElementById("price").value);
      const VirtualCurrency = document.getElementById("currency").value.trim();

      const res = await fetch(`https://${titleId}.playfabapi.com/Client/PurchaseItem`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "X-Authorization": sessionTicket
        },
        body: JSON.stringify({
          ItemId,
          Price,
          VirtualCurrency,
          StoreId: "steam_Shop_Items"
        })
      });

      const data = await res.json();
      console.log("PurchaseItem response:", data);
      alert("PurchaseItem response logged to console.");
    }

    async function grantCoupons() {
      if (!sessionTicket) return alert("Please set your SessionTicket first.");

      // Step 1: StartPurchase
      const startRes = await fetch(`https://${titleId}.playfabapi.com/Client/StartPurchase`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "X-Authorization": sessionTicket
        },
        body: JSON.stringify({
          StoreId: "steam_Shop_Currency",
          Items: [{
            ItemId: "Currency_Bundle_PileOfCoupons",
            Quantity: 1
          }]
        })
      });

      const startData = await startRes.json();
      const orderId = startData.data?.OrderId;
      if (!orderId) return alert("StartPurchase failed.");

      // Step 2: PayForPurchase
      const payRes = await fetch(`https://${titleId}.playfabapi.com/Client/PayForPurchase`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "X-Authorization": sessionTicket
        },
        body: JSON.stringify({
          OrderId: orderId,
          Currency: "RM", // Replace with your currency code
          ProviderName: "Steam" // Or PayPal, etc.
        })
      });

      const payData = await payRes.json();
      console.log("PayForPurchase response:", payData);

      // Step 3: ConfirmPurchase
      const confirmRes = await fetch(`https://${titleId}.playfabapi.com/Client/ConfirmPurchase`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "X-Authorization": sessionTicket
        },
        body: JSON.stringify({
          OrderId: orderId
        })
      });

      const confirmData = await confirmRes.json();
      console.log("ConfirmPurchase response:", confirmData);
      alert("GrantCoupons flow completed. Check console for details.");
    }
  </script>
</body>
</html>
